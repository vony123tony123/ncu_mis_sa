<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Jekyll v3.8.5">

  <title>保險資訊輸入</title>

  <!-- Bootstrap core CSS -->
  <link href="statics/css/bootstrap.min.css" rel="stylesheet">
  <link href="statics/css/font-awesome.min.css" rel="stylesheet">
  <link href="statics/icon/favicon.ico" type="image/x-icon" rel="icon">
  <link href="statics/icon/favicon.ico" type="image/x-icon" rel="shortcut icon">
  
  <!-- Custom styles for this template -->
  <link href="statics/css/product.css" rel="stylesheet">
  <link href="statics/css/jquery-confirm.css" rel="stylesheet">

  <script src="statics/js/jquery-3.4.1.min.js"></script>
  <script src="statics/js/jquery-confirm.js"></script>
</head>
<body>

<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 border-bottom shadow-sm">
	<img src="./statics/img/youtbue.png" style="width:40px;height:30px;">
	<h5 class="my-0 mr-md-auto font-weight-normal">投保流程</h5>
    <nav class="my-2 my-md-0 mr-md-3">
      <a class="p-2 text-dark" href="index.html">會員管理模組</a>
      <a class="p-2 text-dark" href="product.html">商品列表</a>
      <a class="p-2 text-dark" href="order.html">訂單列表</a>
    </nav>
    <a class="btn btn-outline-primary" href="cart.html">購物車</a>
  </div>
  
 <div class="progress" style="weight:100px;height:30px;border-radius: 20px">
  <div class="progress-bar" style="width:0%;height:30px;border-radius: 20px">
  	<h5 class="text-black-50" style="font-family:Microsoft JhengHei;">正在完成保險資訊確認</h5>
  </div>
</div> 
  
 <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center bg-light">
    <h1 class="display-4">保險資訊輸入</h1>
    <p class="lead">請輸入保單相關資訊</p>
  </div>
	  
<div class="bg-img" style="background-image: url('statics/img/caption.jpg');
							 background-repeat: no-repeat;
							 background-attachment: fixed;
  								background-size: cover;">
	  <div class="container" >
		  <div class="py-5">
		  	<div style="background-color:#dedde280;border-radius:10px;">
		  	
		  		<h4 class="mb-3">個人資訊</h4>
			    <hr class="mb-4">	
			 	<div class="col-md-6 mb-2">
			      <label for="member_id">會員編號</label>
			      <input type="text" class="form-control" id="member_id" maxlength="10" value="" required>
			     </div>
			   		
			   <div class="col-md-6 mb-2">
			     <label for="Insurance_id">保險編號</label>
			     <input id="Insurance_id" type="text" class="form-control" maxlength="10" required>
			   </div>
		        
		        <h4 class="mb-3">受益人資訊</h4>
			    <hr class="mb-4">
			    
			    <div class="col-md-6 mb-3">
		          <label for="name">姓名</label><br/>
		          <input id="name" type="text" class="form-control" maxlength="10" placeholder="王小明" required>
		        </div>
		        
		        <div class="col-md-4 mb-3">
		          <label for="relation">和要保人關係</label><br/>
		          <input id="relation" type="text" class="form-control" maxlength="10" placeholder="父子" required>
		        </div>
	
		        <div class="col-md-6 mb-3">
		          <label for="phonenum">手機號碼</label><br/>
		          <input id="phonenum" type="tel" class="form-control" maxlength="20" placeholder="09xx-xxx-xxx" required>
		        </div>
	
		        <div class="col-md-10 mb-3">
		          <label for="address">住址</label>
		          <input type="text" class="form-control" id="address" maxlength="255" placeholder="請輸入有效之地址！" required>
		        </div>
		        
		        <div class="col-md-10 mb-3">
		          <label for="email">Email <span class="text-muted">(Optional)</span></label>
		          <input type="email" class="form-control" maxlength="50" id="email" placeholder="you@example.com" required>
		        </div>
		        
		        <div class="d-grid gap-2 col-6 mx-auto">
		  			<a id="check" class="btn btn-primary btn-lg btn-block" type="button" href = "insurance_policy_check.html">送出資料</a>
		  		</div>    
		  	</div>
		</div>
	</div>
</div>

<script>
	$("#check").click(function(){
		var data={
				"member_id":$("#member_id").val(),
				"insurance_id":$("#Insurance_id").val(),
				"name":$("#name").val(),
				"email":$('#email').val(),
				"relation":$("#relation").val(),
				"address":$("#address").val(),
				"phone":$("#phonenum").val()
		}
		
		if(validData(data)){
			localStorage.setItem("beneficiary_data",data)
			console.log("datadeliver_succes!!")
		}else{
			return false;
		}
		
		
		function validData(data){
			var email_rule = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/;
			var phone_rule = /^09\d{2}-\d{3}-\d{3}$/;

	    	if (data["member_id"] == "" || data["insurance_id"] == "" || data['name'] == "" || data['relation'] == ""||data["address"]=="")  alert("必填寫欄位不得有空值！");
	    	else if (data['email'] != "" && !email_rule.test(data['email'])) alert("Email格式不符！");
	    	else if (!phone_rule.test(data['phone'])) alert("手機格式不符（應為09XX-XXX-XXX）！");
	    	else return true;

	    	return false;
		}
		
		
		
	})
</script>



</body>
</html>